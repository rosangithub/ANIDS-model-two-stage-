{% extends "base.html" %}

{% block title %}Predict | ANIDS{% endblock %}

{% block head %}

    <link rel="stylesheet" href="{{ url_for('static', filename='css/pages/predict.css') }}">
{% endblock head %}

{% block content %}
<div class="predict-page">
  <div class="predict-shell">
    <div class="predict-card">
      <h1 class="predict-title">Packet Details</h1>
      <p class="predict-subtitle">Please fill in the following features:</p>

      <form class="predict-form" action="/predict" method="POST" id="predictForm">

        {% for feature in feature_order %}
          <div class="field">
            <label for="{{ feature }}">{{ feature }}</label>

            {% if feature == "Destination Port" %}
              <input
                id="{{ feature }}"
                type="number"
                step="1"
                min="0"
                max="65535"
                name="{{ feature }}"
                placeholder="0 - 65535"
                required
              >
            {% else %}
              <input
                id="{{ feature }}"
                type="number"
                step="any"
                name="{{ feature }}"
                placeholder="Enter value"
                required
              >
            {% endif %}
          </div>
        {% endfor %}

        <div class="full-width">
          <button type="submit" class="predict-btn" id="predictBtn">
            Predict
          </button>
        </div>

      </form>

      {% if result %}
        <div class="result">
          <h2 class="result-title">Result</h2>
          <div class="result-box">{{ result }}</div>
        </div>
      {% endif %}

    </div>
  </div>
</div>
{% endblock content %}

{% block scripts %}


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const form = document.getElementById("predictForm");
    const btn = document.getElementById("predictBtn");

    if (form && btn) {
      form.addEventListener("submit", () => {
        btn.disabled = true;
        btn.textContent = "Predicting...";
      });
    }
  </script>


{% endblock scripts %}
